means<- mean(y,na.rm = removeNA)
}
means
}
pollutantmean<-function(directory,pollutant,id = 1:332){
total<-c()
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
result<-meanVal(dir,pollutant)
total <-c(result)
}
mean(total)
#round(total/length(id),3)
}
#Calculate the mean value of each column by removing NAs
meanVal<-function(f,pollutant,removeNA = TRUE){
nc <- ncol(f)
nr<- nrow(f)
means <- numeric(nc)
for(i in 1:nr)
if(pollutant == "sulfate"){
y <- f[,2]
means<- mean(y,na.rm = removeNA)
}
else if(pollutant == "nitrate")
{
y <- f[,3]
means<- mean(y,na.rm = removeNA)
}
means
}
pollutantmean("specdata","nitrate",23)
pollutantmean("specdata","nitrate",70:72)
pollutantmean<-function(directory,pollutant,id = 1:332){
total<-c()
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
result<-meanVal(dir,pollutant)
total <-c(result)
}
mean(total)
#round(total/length(id),3)
}
#Calculate the mean value of each column by removing NAs
meanVal<-function(f,pollutant,removeNA = TRUE){
nc <- ncol(f)
nr<- nrow(f)
means <- numeric(nc)
for(i in 1:nr){
if(pollutant == "sulfate"){
y <- f[,2]
means<- mean(y,na.rm = removeNA)
}
else if(pollutant == "nitrate")
{
y <- f[,3]
means<- mean(y,na.rm = removeNA)
}
}
means
}
pollutantmean("specdata","nitrate",70:72)
pollutantmean<-function(directory,pollutant,id = 1:332){
total<-c()
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
result<-meanVal(dir,pollutant)
total <-c(result)
}
mean(total)
#round(total/length(id),3)
}
#Calculate the mean value of each column by removing NAs
meanVal<-function(f,pollutant,removeNA = TRUE){
nc <- ncol(f)
nr<- nrow(f)
means <- numeric(nc)
for(i in 1:nr){
if(pollutant == "sulfate"){
y <- f[,2]
means<- mean(y,na.rm = removeNA)
}
else if(pollutant == "nitrate")
{
y <- f[,3]
means<- mean(y,na.rm = removeNA)
}
}
means
}
pollutantmean("specdata","nitrate",23)
pollutantmean("specdata","nitrate",70:72)
pollutantmean("specdata","sulphate",1:10)
pollutantmean("specdata","sulfate",1:10)
dir<-read.csv(file_paths[23],header = T,sep = ",")
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
directory = "specdata"
pollutant = "nitrate"
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
dir<-read.csv(file_paths[23],header = T,sep = ",")
#Calculate the mean value of each column by removing NAs
meanVal<-function(f,pollutant,removeNA = TRUE){
if(pollutant == "sulfate"){
y <- f[,2]
means<- mean(y,na.rm = removeNA)
}
else if(pollutant == "nitrate")
{
y <- f[,3]
means<- mean(y,na.rm = removeNA)
}
means
}
dir<-read.csv(file_paths[23],header = T,sep = ",")
meanVal(dir,"nitrate")
i = 70
dir<-read.csv(file_paths[i],header = T,sep = ",")
View(dir)
meanVal(dir,pollutant)
View(dir)
dir[,3]
dir[,"sulfate"]
[!is.na(dir[,pollutant])]
dir[,pollutant]
bad<-is.na(dir[,pollutant])
good<-dir[!bad]
bad
good<-dir[,!bad]
k$pollution
dir$pollution
View(dir)
k<-dir([,pollutant])
k<-dir[,pollutant]
bad<-is.na(k)
good<-dir[!bad]
good<-k[!bad]
mean(good)
good
dir<-read.csv(file_paths[71],header = T,sep = ",")
k<-dir[,pollutant]
bad<-is.na(k)
good<-dir[!bad]
good<-k[!bad]
mean(good)
pollutantmean <- function(directory, pollutant = "sulfate", id = 1:332) {
## 'directory' is a character vector of length 1 indicating
## the location of the CSV files
## 'pollutant' is a character vector of length 1 indicating
## the name of the pollutant for which we will calculate the
## mean; either "sulfate" or "nitrate".
## 'id' is an integer vector indicating the monitor ID numbers
## to be used
## Return the mean of the pollutant across all monitors list
## in the 'id' vector (ignoring NA values)
# set working directory
if(grep("specdata", directory) == 1) {
directory <- ("./specdata/")
}
# initialize a vector to hold the pollutant data
mean_vector <- c()
# find all files in the specdata folder
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep="")
for(i in id) {
current_file <- read.csv(file_paths[i], header=T, sep=",")
head(current_file)
pollutant
na_removed <- current_file[!is.na(current_file[, pollutant]), pollutant]
mean_vector <- c(mean_vector, na_removed)
}
result <- mean(mean_vector)
return(round(result, 3))
}
pollutantmean <- function(directory, pollutant = "sulfate", id = 1:332) {
mean_vector <- c()
# find all files in the specdata folder
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep="")
for(i in id) {
current_file <- read.csv(file_paths[i], header=T, sep=",")
head(current_file)
pollutant
na_removed <- current_file[!is.na(current_file[, pollutant]), pollutant]
mean_vector <- c(mean_vector, na_removed)
}
result <- mean(mean_vector)
return(round(result, 3))
}
pollutionmean("specdata","nitrate",70:72)
pollutantmean("specdata","nitrate",70:72)
pollutantmean <- function(directory, pollutant = "sulfate", id = 1:332) {
mean_vector <- c()
# find all files in the specdata folder
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep="/")
for(i in id) {
current_file <- read.csv(file_paths[i], header=T, sep=",")
head(current_file)
pollutant
na_removed <- current_file[!is.na(current_file[, pollutant]), pollutant]
mean_vector <- c(mean_vector, na_removed)
}
result <- mean(mean_vector)
return(round(result, 3))
}
pollutantmean("specdata","nitrate",70:72)
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep="/")
current_file <- read.csv(file_paths[70], header=T, sep=",")
mean_vector <- c()
na_removed <- current_file[!is.na(current_file[, pollutant]), pollutant]
mean_vector <- c(mean_vector, na_removed)
result <- mean(mean_vector)
current_file <- read.csv(file_paths[71], header=T, sep=",")
na_removed <- current_file[!is.na(current_file[, pollutant]), pollutant]
mean_vector <- c(mean_vector, na_removed)
mean_vector <- c(mean_vector, na_removed)
result <- mean(mean_vector)
current_file <- read.csv(file_paths[72], header=T, sep=",")
na_removed <- current_file[!is.na(current_file[, pollutant]), pollutant]
mean_vector <- c(mean_vector, na_removed)
result <- mean(mean_vector)
current_file <- read.csv(file_paths[71], header=T, sep=",")
na_removed <- current_file[!is.na(current_file[, pollutant]), pollutant]
mean_vector <- c(mean_vector, na_removed)
mean(good)
mean(result)
mean_vector
mean_vector <- c(mean_vector, na_removed)
mean_vector <- c(mean_vector, na_removed)
mean_vector <- c()
directory = "specdata"
pollutant = "nitrate"
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep="/")
current_file <- read.csv(file_paths[71], header=T, sep=",")
na_removed <- current_file[!is.na(current_file[, pollutant]), pollutant]
mean_vector <- c(mean_vector, na_removed)
result <- mean(mean_vector)
k<-dir[,pollutant]
k<-dir[,"pollutant"]
k<-dir[,pollutant]
bad<-is.na(k)
k<-current_file[,pollutant]
bad<-is.na(k)
good<-k[!bad]
mean(good)
k<-current_file[,pollutant]
bad<-is.na(k)
good<-k[!bad]
mean(good)
current_file <- read.csv(file_paths[72], header=T, sep=",")
k<-current_file[,pollutant]
bad<-is.na(k)
good<-k[!bad]
mean(good)
na_removed <- current_file[!is.na(current_file[, pollutant]), pollutant]
mean_vector <- c(mean_vector, na_removed)
a = c(1,2,3,4)
a<-c(a,2)
a
pollutantmean<-function(directory,pollutant,id = 1:332){
total<-c()
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
removeNA<-dir[!is.na(dir[,pollutant]),pollutant]
total <-c(total,removeNA)
}
round(mean(total))
}
pollutantmean<-function(directory,pollutant,id = 1:332){
total<-c()
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
removeNA<-dir[!is.na(dir[,pollutant]),pollutant]
total <-c(total,removeNA)
}
round(mean(total))
#round(total/length(id),3)
}
pollutantmean("specdata","nitrate",70:72)
round(mean(total),3)
pollutantmean<-function(directory,pollutant,id = 1:332){
total<-c()
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
removeNA<-dir[!is.na(dir[,pollutant]),pollutant]
total <-c(total,removeNA)
}
round(mean(total),3)
#round(total/length(id),3)
}
# #Calculate the mean value of each column by removing NAs
# meanVal<-function(f,pollutant,removeNA = TRUE){
#     if(pollutant == "sulfate"){
#       y <- f[,2]
#       means<- mean(y,na.rm = removeNA)
#     }
#   else if(pollutant == "nitrate")
#     {
#       y <- f[,3]
#       means<- mean(y,na.rm = removeNA)
#     }
#   means
# }
# k<-current_file[,pollutant]
# bad<-is.na(k)
# good<-k[!bad]
# mean(good)
round(mean(total),3)
pollutantmean("specdata","nitrate",70:72)
pollutantmean("specdata","sulfate",1:10)
dir<-read.csv(file_paths[1],header = T,sep = ",")
directory = "specdata"
pollution = "nitrate"
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
dir<-read.csv(file_paths[i],header = T,sep = ",")
dir<-read.csv(file_paths[1],header = T,sep = ",")
View(dir)
dir[!is.na(dir[,]),]
complete.cases(dir)
sum(complete.cases(dir))
completeCase<-function(directory,id = 1:332){
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
count<-1
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
completedata[j] <- sum(complete.cases(dir))
count<-count+1
}
result <- data.frame(id = id,nobs = completedata)
result
}
completeCase<-function(directory,id = 1:332){
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
count<-1
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
completedata[j] <- sum(complete.cases(dir))
count<-count+1
}
result <- data.frame(id = id,nobs = completedata)
result
}
completeCase("specdata",1)
completeCase<-function(directory,id = 1:332){
completedata<-rep(0,length(id))
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
count<-1
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
completedata[j] <- sum(complete.cases(dir))
count<-count+1
}
result <- data.frame(id = id,nobs = completedata)
result
}
completeCase("specdata",1)
completeCase<-function(directory,id = 1:332){
completedata<-rep(0,length(id))
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
count<-1
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
completedata[count] <- sum(complete.cases(dir))
count<-count+1
}
result <- data.frame(id = id,nobs = completedata)
result
}
completeCase("specdata",1)
completeCase("specdata",1:10)
completeCase("specdata",c(2,4,6,8))
directory = "specdata"
completedata<-completeCase(directory,1:332)
View(completedata)
completedata$nobs
completeCase.obs
corr<-function(directory,threshold=0){
completedata<-completeCase(directory,1:332)
nobs <- completedata$nobs
ids <- completedata[nobs>threshold]
correlation <- rep(0,length(ids))
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
count<-1
for(i in ids){
dir<-read.csv(file_paths[i],header = T,sep = ",")
correlation[count] <- cor(dir$sulfate,dir$nitrate,use = "complete.obs")
count<-count+1
}
correlation
}
corr(directory,150)
ids <- completedata[nobs>threshold]
ids <- completedata[nobs>150]
corr<-function(directory,threshold=0){
completedata<-completeCase(directory,1:332)
nobs <- completedata$nobs
ids <- completedata$id[nobs>threshold]
correlation <- rep(0,length(ids))
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
count<-1
for(i in ids){
dir<-read.csv(file_paths[i],header = T,sep = ",")
correlation[count] <- cor(dir$sulfate,dir$nitrate,use = "complete.obs")
count<-count+1
}
correlation
}
corr(directory,150)
cr<-corr(directory,150)
head(cr)
pollutantmean<-function(directory,pollutant,id = 1:332){
total<-c()
all_files <- as.character( list.files(directory) )
file_paths <- paste(directory, all_files, sep ="/")
for(i in id){
dir<-read.csv(file_paths[i],header = T,sep = ",")
removeNA<-dir[!is.na(dir[,pollutant]),pollutant]
total <-c(total,removeNA)
}
round(mean(total),3)
#round(total/length(id),3)
}
# #Calculate the mean value of each column by removing NAs
# meanVal<-function(f,pollutant,removeNA = TRUE){
#     if(pollutant == "sulfate"){
#       y <- f[,2]
#       means<- mean(y,na.rm = removeNA)
#     }
#   else if(pollutant == "nitrate")
#     {
#       y <- f[,3]
#       means<- mean(y,na.rm = removeNA)
#     }
#   means
# }
# k<-current_file[,pollutant]
# bad<-is.na(k)
# good<-k[!bad]
# mean(good)
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "sulfate", 34)
pollutantmean("specdata", "nitrate")
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
cc <- completeCase("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
cc <- completeCase("specdata", 54)
print(cc$nobs)
set.seed(42)
cc <- completeCase("specdata", 332:1)
use <- sample(332, 10)
print(cc[use, "nobs"])
cr <- corr("specdata")
cr <- sort(cr)
set.seed(868)
out <- round(cr[sample(length(cr), 5)], 4)
print(out)
cr <- corr("specdata", 129)
cr <- sort(cr)
n <- length(cr)
set.seed(197)
out <- c(n, round(cr[sample(n, 5)], 4))
print(out)
cr <- corr("specdata", 2000)
n <- length(cr)
cr <- corr("specdata", 1000)
cr <- sort(cr)
print(c(n, round(cr, 4)))
rnorm(10)
abs(rnorm(10))
a<-round(abs(rnorm(10)))
a
pdf("xh.pdf")  # set graphical output filehist(rnorm(100))  # generate 100 N(0,1) variates and plot their histogramdev.off()  # close the graphical output file
pdf("xh.pdf")  # set graphical output file
hist(rnorm(100))  # generate 100 N(0,1) variates and plot their histogram
dev.off()  # close the graphical output file
x<-c(1,2,3)
y<-c(x,x,4)
y
mean(y)
sd(y)
hist(y)
z<-hist(y)
z
hist(y)
dev.off
dev.off()
hist(y)
q()
